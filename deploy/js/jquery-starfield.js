!function(a){var b=5e3,c=function(a,b,c,d){this.x=a,this.y=b,this.size=c,this.color=d};c.prototype.mapXYToCanvasCoordinates=function(a,c){var d=Math.round(this.x/b*a),e=Math.round(this.y/b*c);return{x:d,y:e}};var d={getRandomStar:function(){var a=Math.floor(Math.random()*(b+1)),d=Math.floor(Math.random()*(b+1)),e=this._getWeightedRandomSize(),f=this._getWeightedRandomColor(),g=this._applyRandomShade(f);return new c(a,d,e,this._getRGBColorString(g))},_getWeightedRandomSize:function(){var a=[1,1.5,2],b=[.8,.15,.05];return this._getWeightedRandom(a,b)},_getWeightedRandomColor:function(){var a=[{r:255,g:189,b:111},{r:255,g:221,b:180},{r:255,g:244,b:232},{r:251,g:248,b:255},{r:202,g:216,b:255},{r:170,g:191,b:255},{r:155,g:176,b:255}],b=[.05,.05,.05,.7,.05,.05,.05];return this._getWeightedRandom(a,b)},_getRandomShade:function(){var a=[.4,.6,1],b=[.5,.3,.2];return this._getWeightedRandom(a,b)},_applyRandomShade:function(a){var b=this._getRandomShade();return 1!==b&&(a.r=Math.floor(a.r*b),a.g=Math.floor(a.g*b),a.b=Math.floor(a.b*b)),a},_getRGBColorString:function(a){return"rgb("+a.r+","+a.g+","+a.b+")"},_getWeightedRandom:function(a,b){for(var c=function(a,b){return Math.random()*(b-a)+a},d=b.reduce(function(a,b){return a+b}),e=c(0,d),f=0,g=0;g<a.length;g++)if(f+=b[g],f=+f.toFixed(2),f>=e)return a[g]}},e=[];a.fn.starfield=function(c){var f=a.extend({starDensity:1,mouseScale:1,seedMovement:!0},c);$this=a(this);var g=$this.width(),h=$this.height(),i=g*h,j=.002*f.starDensity,k=Math.floor(i*j);if(f.seedMovement)var l=5,m=5;else var l=0,m=0;for(var n=(a('<canvas id="rocketwagon-canvas">').css({position:"absolute",left:0,top:0,width:"100%",height:"100%"}).attr({width:$this.width(),height:$this.height()}).prependTo($this),0);k>n;n++)e.push(d.getRandomStar());var o=function(){a.each(e,function(a,c){var d=c.x-l,e=c.y-m;0>d&&(d+=b),0>e&&(e+=b),d>b&&(d-=b),e>b&&(e-=b),c.x=d,c.y=e})},p=function(){var b=document.getElementById("rocketwagon-canvas"),c=b.width,d=b.height;if(b.setAttribute("width",c.toString()),b.setAttribute("height",d.toString()),b.getContext){var f=b.getContext("2d");f.clearRect(0,0,c,d),f.fillStyle="transparent",f.fillRect(0,0,c,d),a.each(e,function(a,b){var e=b.mapXYToCanvasCoordinates(c,d);f.fillStyle=b.color,f.fillRect(e.x,e.y,b.size,b.size)})}};return $this.mousemove(function(b){var c=a(this),d=c.offset(),e=g/2,i=h/2,j=b.pageX-d.left-e,k=b.pageY-d.top-i;l=Math.round(f.mouseScale*(j/40)),m=Math.round(f.mouseScale*(k/40))}),function q(){requestAnimationFrame(q),o(),p()}(),this}}(jQuery);